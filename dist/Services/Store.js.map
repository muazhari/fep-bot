{"version":3,"sources":["../../src/Services/Store.js"],"names":["logStorage","storage","create","dir","path","join","__dirname","stringify","JSON","parse","encoding","logging","ttl","expiredInterval","forgiveParseErrors","init","setStore","obj","Object","keys","map","key","setItem","getStore","storeName","getItem","remStore","removeItem","updStore","value","updateItem"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;AACA;;AAEA,MAAMA,aAAa,YAAW;AAC5B,UAAOC,sBAAQC,MAAR,CAAe;AACpBC,WAAKC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,aAArB,CADe;;AAGpBC,iBAAWC,KAAKD,SAHI;;AAKpBE,aAAOD,KAAKC,KALQ;;AAOpBC,gBAAU,MAPU;;AASpBC,eAAS,IATW,EASJ;;AAEhBC,WAAK,KAXe,EAWR;;AAEZC,uBAAiB,IAAI,EAAJ,GAAS,IAbN,EAaY;;AAEhC;AACA;AACAC,0BAAoB;;AAjBA,IAAf,CAAP;AAoBD,CArBD;;AAuBA,MAAMC,OAAO,YAAY;AACvB,SAAMd,sBAAQc,IAAR,EAAN;AACA,SAAMf,aAAae,IAAb,EAAN;AACD,CAHD;;AAKA,MAAMC,WAAW,MAAMC,GAAN,IAAa;AAC5B,SAAMC,OAAOC,IAAP,CAAYF,GAAZ,EAAiBG,GAAjB,CAAqB,MAAMC,GAAN,IAAa;AACtC,YAAMpB,sBAAQqB,OAAR,CAAgBD,GAAhB,EAAqBJ,IAAII,GAAJ,CAArB,CAAN;AACD,IAFK,CAAN;AAGD,CAJD;;AAMA,MAAME,WAAW,MAAMC,SAAN,IAAmB;AAClC,UAAO,MAAMvB,sBAAQwB,OAAR,CAAgBD,SAAhB,CAAb;AACD,CAFD;;AAIA,MAAME,WAAW,MAAMF,SAAN,IAAmB;AAClC,SAAMvB,sBAAQ0B,UAAR,CAAmBH,SAAnB,CAAN;AACD,CAFD;;AAIA,MAAMI,WAAW,OAAOJ,SAAP,EAAkBK,KAAlB,KAA4B;AAC3C,SAAM5B,sBAAQ6B,UAAR,CAAmBN,SAAnB,EAA8BK,KAA9B,CAAN;AACD,CAFD;;kBAIe,EAACd,IAAD,EAAOC,QAAP,EAAiBO,QAAjB,EAA2BG,QAA3B,EAAqCE,QAArC,E","file":"Store.js","sourcesContent":["import storage from \"node-persist\";\nimport path from \"path\";\n\n// share worker props by groupId\n// const shared_props = storage.create({});\n\nconst logStorage = async () =>{\n  return storage.create({\n    dir: path.join(__dirname, \"../src/Logs\"),\n \n    stringify: JSON.stringify,\n \n    parse: JSON.parse,\n \n    encoding: 'utf8',\n \n    logging: true,  // can also be custom logging function\n \n    ttl: false, // ttl* [NEW], can be true for 24h default or a number in MILLISECONDS or a valid Javascript Date object\n \n    expiredInterval: 2 * 60 * 1000, // every 2 minutes the process will clean-up the expired cache\n \n    // in some cases, you (or some other service) might add non-valid storage files to your\n    // storage dir, i.e. Google Drive, make this true if you'd like to ignore these files and not throw an error\n    forgiveParseErrors: false\n \n});\n}\n\nconst init = async () => {\n  await storage.init();\n  await logStorage().init();\n};\n\nconst setStore = async obj => {\n  await Object.keys(obj).map(async key => {\n    await storage.setItem(key, obj[key]);\n  });\n};\n\nconst getStore = async storeName => {\n  return await storage.getItem(storeName);\n};\n\nconst remStore = async storeName => {\n  await storage.removeItem(storeName);\n};\n\nconst updStore = async (storeName, value) => {\n  await storage.updateItem(storeName, value);\n};\n\nexport default {init, setStore, getStore, remStore, updStore};\n"]}