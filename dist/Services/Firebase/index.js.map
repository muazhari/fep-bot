{"version":3,"sources":["../../../src/Services/Firebase/index.js"],"names":["Firebase","constructor","config","app","initApp","fdb","firestore","rdb","database","initSetting","serviceAccountKeyFile","serviceAccountKeyPath","path","join","__dirname","admin","initializeApp","credential","cert","databaseURL","firebaseDatabaseURL","fireStoreSetting","settings","timestampsInSnapshots","firebaseAdminConfig"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,QAAN,CAAe;AACbC,cAAYC,MAAZ,EAAoB;AAClB,SAAKC,GAAL,GAAW,KAAKC,OAAL,CAAaF,MAAb,CAAX;AACA,SAAKG,GAAL,GAAW,KAAKF,GAAL,CAASG,SAAT,EAAX;AACA,SAAKC,GAAL,GAAW,KAAKJ,GAAL,CAASK,QAAT,EAAX;;AAEA,SAAKC,WAAL;AACD;;AAEDL,UAAQF,MAAR,EAAgB;AACd,UAAMQ,wBAAwB,wBAA9B;AACA,UAAMC,wBAAwBC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,qBAArB,EAA6C,GAAEJ,qBAAsB,EAArE,CAA9B;AACA;AACA;AACA;AACA,WAAOK,wBAAMC,aAAN,CAAoB,EAACC,YAAYF,wBAAME,UAAN,CAAiBC,IAAjB,CAAsBP,qBAAtB,CAAb,EAA2DQ,aAAajB,OAAOkB,mBAA/E,EAApB,CAAP;AACD;;AAEDX,gBAAc;AACZ,SAAKY,gBAAL;AACD;;AAEDA,qBAAmB;AACjB,SAAKhB,GAAL,CAASiB,QAAT,CAAkB,EAACC,uBAAuB,IAAxB,EAAlB;AACD;AAxBY;;kBA2BA,IAAIvB,QAAJ,CAAa,EAACwB,kDAAD,EAAsBJ,kDAAtB,EAAb,C","file":"index.js","sourcesContent":["import admin from \"firebase-admin\";\nimport functions from \"firebase-functions\";\nimport {firebaseConfig, firebaseAdminConfig, firebaseDatabaseURL} from \"../../Config/Firebase\";\nimport fs from \"fs-extra\";\nimport path from \"path\";\nimport cp from \"child_process\";\n\nclass Firebase {\n  constructor(config) {\n    this.app = this.initApp(config);\n    this.fdb = this.app.firestore();\n    this.rdb = this.app.database();\n\n    this.initSetting();\n  }\n\n  initApp(config) {\n    const serviceAccountKeyFile = \"serviceAccountKey.json\";\n    const serviceAccountKeyPath = path.join(__dirname, \"../../../src/Config\", `${serviceAccountKeyFile}`);\n    //     const serviceAccountKeyPath = path.join(__dirname, \"../../../src/Config\", `${serviceAccountKeyFile}`);\n    // const serviceAccountKeyData = JSON.stringify(config.firebaseAdminConfig);\n    // fs.writeFile(serviceAccountKeyPath, serviceAccountKeyData, \"utf8\");\n    return admin.initializeApp({credential: admin.credential.cert(serviceAccountKeyPath), databaseURL: config.firebaseDatabaseURL});\n  }\n\n  initSetting() {\n    this.fireStoreSetting();\n  }\n\n  fireStoreSetting() {\n    this.fdb.settings({timestampsInSnapshots: true});\n  }\n}\n\nexport default new Firebase({firebaseAdminConfig, firebaseDatabaseURL});\n"]}