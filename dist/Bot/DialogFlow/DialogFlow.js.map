{"version":3,"sources":["../../../src/Bot/DialogFlow/DialogFlow.js"],"names":["DialogFlow","Bot","projectId","sessionId","uuid","v4","sessionClient","dialogflow","SessionsClient","config","sessionPath","request","message","console","log","Promise","resolve","reject","query","session","queryInput","text","languageCode","responses","detectIntent","result","queryResult","err"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,aAAa,MAAMC,GAAN,IAAa;AAC9B,QAAMC,YAAY,iBAAlB;AACA;AACA,QAAMC,YAAYC,eAAKC,EAAL,EAAlB;;AAEA;AACA,QAAMC,gBAAgB,MAAM,IAAIC,qBAAWC,cAAf,CAA8BC,oBAA9B,CAA5B;AACA,QAAMC,cAAcJ,cAAcI,WAAd,CAA0BR,SAA1B,EAAqCC,SAArC,CAApB;;AAEA;AACA,QAAMQ,UAAUC,WAAW;AACzBC,YAAQC,GAAR,CAAYL,oBAAZ,EAAoBG,OAApB;AACA,WAAO,IAAIG,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,UAAI;AACF,cAAMC,QAAQ;AACZC,mBAAST,WADG;AAEZU,sBAAY;AACVC,kBAAM;AACJ;AACAA,oBAAMT,OAFF;AAGJ;AACAU,4BAAc;AAJV;AADI;AAFA,SAAd;AAWA,cAAMC,YAAYjB,cAAckB,YAAd,CAA2BN,KAA3B,CAAlB;AACAL,gBAAQC,GAAR,CAAY,iBAAZ,EAA+BS,SAA/B;AACA,cAAME,SAASF,UAAU,CAAV,EAAaG,WAA5B;AACAV,gBAAQS,MAAR;AACD,OAhBD,CAgBE,OAAOE,GAAP,EAAY;AACZV,eAAOU,GAAP;AACA,cAAMA,GAAN;AACD;AACF,KArBM,CAAP;AAsBD,GAxBD;;AA0BA,SAAO;AACLhB;AADK,GAAP;AAGD,CAvCD;;kBAyCeX,U","file":"DialogFlow.js","sourcesContent":["import dialogflow from \"dialogflow\";\nimport uuid from \"uuid\";\nimport config from \"../../Config/DialogFlow\";\n\nconst DialogFlow = async Bot => {\n  const projectId = \"newagent-nlaqvy\";\n  // A unique identifier for the given session\n  const sessionId = uuid.v4();\n\n  // Create a new session\n  const sessionClient = await new dialogflow.SessionsClient(config);\n  const sessionPath = sessionClient.sessionPath(projectId, sessionId);\n\n  // Send request and log result\n  const request = message => {\n    console.log(config, message);\n    return new Promise((resolve, reject) => {\n      try {\n        const query = {\n          session: sessionPath,\n          queryInput: {\n            text: {\n              // The query to send to the dialogflow agent\n              text: message,\n              // The language used by the client (en-US)\n              languageCode: \"en-US\"\n            }\n          }\n        };\n        const responses = sessionClient.detectIntent(query);\n        console.log(\"Detected intent\", responses);\n        const result = responses[0].queryResult;\n        resolve(result);\n      } catch (err) {\n        reject(err);\n        throw err;\n      }\n    });\n  };\n\n  return {\n    request\n  };\n};\n\nexport default DialogFlow;\n"]}