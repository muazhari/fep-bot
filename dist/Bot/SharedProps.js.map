{"version":3,"sources":["../../src/Bot/SharedProps.js"],"names":["SharedPropsFactory","constructor","store","Proxy","set","obj","prop","newval","oldval","console","log","storeUpdateListener","get","key","Firebase","rdb","ref","props","Object","keys","forEach","updateStore","SharedProps"],"mappings":";;;;;;;;;AAAA;;;;;;AAEA,MAAMA,kBAAN,CAAyB;AACvBC,gBAAc;AACZ,SAAKC,KAAL,GAAa,IAAIC,KAAJ,CAAU,KAAKD,KAAf,EAAsB;AACjCE,WAAK,CAACC,GAAD,EAAMC,IAAN,EAAYC,MAAZ,KAAuB;AAC1B,YAAIC,SAASH,IAAIC,IAAJ,CAAb;AACAG,gBAAQC,GAAR,CAAY,KAAZ,EAAmBF,MAAnB,EAA2BH,GAA3B,EAAgCC,IAAhC,EAAsCC,MAAtC;AACAF,YAAIC,IAAJ,IAAYC,MAAZ;AACA,aAAKI,mBAAL;AACD,OANgC;AAOjCC,WAAK,CAACP,GAAD,EAAMC,IAAN,KAAe;AAClBG,gBAAQC,GAAR,CAAY,KAAZ,EAAmBL,GAAnB,EAAwBC,IAAxB;AACD;AATgC,KAAtB,CAAb;AAWD;;AAEDM,MAAIC,GAAJ,EAAS;AACP,QAAIA,GAAJ,EAAS;AACP,aAAO,KAAKX,KAAL,CAAWW,GAAX,CAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAKX,KAAZ;AACD;AACF;;AAEDS,wBAAsB;AACpBG,uBAASC,GAAT,CAAaC,GAAb,CAAiB,aAAjB,EAAgCZ,GAAhC,CAAoC,KAAKF,KAAzC;AACD;;AAEDE,MAAIa,KAAJ,EAAW;AACTC,WAAOC,IAAP,CAAYF,KAAZ,EAAmBG,OAAnB,CAA2BP,OAAO;AAChC,WAAKX,KAAL,CAAWW,GAAX,iBACK,KAAKX,KAAL,CAAWW,GAAX,CADL,EAEKI,MAAMJ,GAAN,CAFL;AAID,KALD;;AAOA,SAAKQ,WAAL;AACD;AApCsB;;AAuCzB,MAAMC,cAAc,IAAItB,kBAAJ,EAApB;;QAGEsB,W,GAAAA,W","file":"SharedProps.js","sourcesContent":["import Firebase from \"../Services/Firebase\";\n\nclass SharedPropsFactory {\n  constructor() {\n    this.store = new Proxy(this.store, {\n      set: (obj, prop, newval) => {\n        var oldval = obj[prop];\n        console.log(\"set\", oldval, obj, prop, newval);\n        obj[prop] = newval;\n        this.storeUpdateListener();\n      },\n      get: (obj, prop) => {\n        console.log(\"get\", obj, prop);\n      }\n    });\n  }\n\n  get(key) {\n    if (key) {\n      return this.store[key];\n    } else {\n      return this.store;\n    }\n  }\n\n  storeUpdateListener() {\n    Firebase.rdb.ref(\"SharedProps\").set(this.store);\n  }\n\n  set(props) {\n    Object.keys(props).forEach(key => {\n      this.store[key] = {\n        ...this.store[key],\n        ...props[key]\n      };\n    });\n\n    this.updateStore();\n  }\n}\n\nconst SharedProps = new SharedPropsFactory();\n\nexport {\n  SharedProps\n};\n"]}