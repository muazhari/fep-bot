{"version":3,"sources":["../../../../src/Bot/Helper/FEPStoreCRUD/index.js"],"names":["set_store","data","Promise","resolve","reject","Object","keys","batch_list","includes","batch","store","Store","getStore","undefined","selectedUserData","name","campus","room","push","setStore","fep","update_store","parseInt","num","delete_store","length","splice"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;;;AAEA,MAAMA,YAAY,MAAMC,IAAN,IAAc;AAC9B,SAAO,IAAIC,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;AAC5C,QAAI,CAACC,OAAOC,IAAP,CAAYC,eAAZ,EAAwBC,QAAxB,CAAiCP,KAAKQ,KAAtC,CAAL,EAAmD;AACjD,aAAOL,OAAO,uBAAP,CAAP;AACD;;AAED,QAAIM,QAAQ,MAAMC,gBAAMC,QAAN,CAAe,KAAf,CAAlB;AACA,QAAIF,UAAUG,SAAd,EAAyB;AACvBH,cAAQ,EAAE,CAACT,KAAKQ,KAAN,GAAc,EAAhB,EAAR;AACD;AACD,QAAG,CAACJ,OAAOC,IAAP,CAAYI,KAAZ,EAAmBF,QAAnB,CAA4BP,KAAKQ,KAAjC,CAAJ,EAA4C;AAC1CC,YAAMT,KAAKQ,KAAX,IAAoB,EAApB;AACD;;AAED,UAAMK,mBAAmB,CAACb,KAAKc,IAAN,EAAYd,KAAKe,MAAjB,EAAyBf,KAAKgB,IAA9B,CAAzB;AACAP,UAAMT,KAAKQ,KAAX,EAAkBS,IAAlB,CAAuBJ,gBAAvB;AACA,UAAMH,gBAAMQ,QAAN,CAAe,EAAEC,KAAKV,KAAP,EAAf,CAAN;AACA,WAAOP,SAAP;AACD,GAjBM,CAAP;AAkBD,CAnBD;;AAqBA,MAAMkB,eAAe,MAAMpB,IAAN,IAAc;AACjC,SAAO,IAAIC,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;AAC5C,QAAI,CAACC,OAAOC,IAAP,CAAYC,eAAZ,EAAwBC,QAAxB,CAAiCP,KAAKQ,KAAtC,CAAL,EAAmD;AACjD,aAAOL,OAAO,uBAAP,CAAP;AACD;;AAED,UAAMM,QAAQ,MAAMC,gBAAMC,QAAN,CAAe,KAAf,CAApB;AACA,UAAME,mBAAmB,CAACb,KAAKc,IAAN,EAAYd,KAAKe,MAAjB,EAAyBf,KAAKgB,IAA9B,CAAzB;AACAP,UAAMT,KAAKQ,KAAX,EAAkBa,SAASrB,KAAKsB,GAAd,EAAmB,EAAnB,IAAyB,CAA3C,IAAgDT,gBAAhD;AACA,UAAMH,gBAAMQ,QAAN,CAAe,EAAEC,KAAKV,KAAP,EAAf,CAAN;AACA,WAAOP,SAAP;AACD,GAVM,CAAP;AAWD,CAZD;;AAcA,MAAMqB,eAAe,MAAMvB,IAAN,IAAc;AACjC,SAAO,IAAIC,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;AAC5C,QAAI,CAACC,OAAOC,IAAP,CAAYC,eAAZ,EAAwBC,QAAxB,CAAiCP,KAAKQ,KAAtC,CAAL,EAAmD;AACjD,aAAOL,OAAO,uBAAP,CAAP;AACD;;AAED,UAAMM,QAAQ,MAAMC,gBAAMC,QAAN,CAAe,KAAf,CAApB;AACA,QAAIF,MAAMT,KAAKQ,KAAX,EAAkBgB,MAAlB,GAA2B,CAA/B,EAAkC;AAChCf,YAAMT,KAAKQ,KAAX,EAAkBiB,MAAlB,CAAyBJ,SAASrB,KAAKsB,GAAd,EAAmB,EAAnB,IAAyB,CAAlD,EAAqD,CAArD;AACD;;AAED,UAAMZ,gBAAMQ,QAAN,CAAe,EAAEC,KAAKV,KAAP,EAAf,CAAN;AACA,WAAOP,SAAP;AACD,GAZM,CAAP;AAaD,CAdD;;kBAgBe;AACbH,WADa;AAEbwB,cAFa;AAGbH;AAHa,C","file":"index.js","sourcesContent":["import { batch_list } from \"../../../Bot\";\nimport storage from \"node-persist\";\nimport Store from \"../../../Services/Store\";\n\nconst set_store = async data => {\n  return new Promise(async (resolve, reject) => {\n    if (!Object.keys(batch_list).includes(data.batch)) {\n      return reject(\"Not in a proper batch\");\n    }\n\n    let store = await Store.getStore(\"fep\");\n    if (store === undefined) {\n      store = { [data.batch]: [] };\n    }\n    if(!Object.keys(store).includes(data.batch)){\n      store[data.batch] = [];\n    }\n\n    const selectedUserData = [data.name, data.campus, data.room];\n    store[data.batch].push(selectedUserData);\n    await Store.setStore({ fep: store });\n    return resolve();\n  });\n};\n\nconst update_store = async data => {\n  return new Promise(async (resolve, reject) => {\n    if (!Object.keys(batch_list).includes(data.batch)) {\n      return reject(\"Not in a proper batch\");\n    }\n\n    const store = await Store.getStore(\"fep\");\n    const selectedUserData = [data.name, data.campus, data.room];\n    store[data.batch][parseInt(data.num, 10) - 1] = selectedUserData;\n    await Store.setStore({ fep: store });\n    return resolve();\n  });\n};\n\nconst delete_store = async data => {\n  return new Promise(async (resolve, reject) => {\n    if (!Object.keys(batch_list).includes(data.batch)) {\n      return reject(\"Not in a proper batch\");\n    }\n    \n    const store = await Store.getStore(\"fep\");\n    if (store[data.batch].length > 0) {\n      store[data.batch].splice(parseInt(data.num, 10) - 1, 1);\n    }\n\n    await Store.setStore({ fep: store });\n    return resolve();\n  });\n};\n\nexport default {\n  set_store,\n  delete_store,\n  update_store\n};\n"]}