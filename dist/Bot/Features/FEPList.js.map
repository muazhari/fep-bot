{"version":3,"sources":["../../../src/Bot/Features/FEPList.js"],"names":["FEPList","Bot","add","args","length","data","batch","name","campus","room","FEPStoreCRUD","set_store","Features","StoreAdvance","backup_store","replyText","command_prefix","update","num","update_store","remove","delete_store","view","undefined","store","Store","getStore","selected_batch","Object","keys","sort","every","item","includes","msg","forEach","console","log","toUpperCase","batch_list","i"],"mappings":"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","file":"FEPList.js","sourcesContent":["import { command_prefix, batch_list } from \"../../Bot\";\nimport FEPStoreCRUD from \"../../Bot/Helper/FEPStoreCRUD\";\n\nimport Store from \"../../Services/Store\";\n\nexport const FEPList = Bot => {\n  const add = async args => {\n    if (args.length === 4) {\n      const data = {\n        batch: args[0],\n        name: args[1],\n        campus: args[2],\n        room: args[3]\n      };\n      await FEPStoreCRUD.set_store(data);\n\n      Bot.Features.StoreAdvance.backup_store(\"silent\");\n\n      Bot.replyText(`Done!\\n${data.name} - ${data.campus} - ${data.room}`);\n    } else {\n      Bot.replyText(`${command_prefix}add <batch> <name> <campus> <room>`);\n    }\n  };\n\n  const update = async args => {\n    if (args.length === 5) {\n      const data = {\n        batch: args[0],\n        num: args[1],\n        name: args[2],\n        campus: args[3],\n        room: args[4]\n      };\n      await FEPStoreCRUD.update_store(data);\n      Bot.replyText(\"Done!\");\n      Bot.Features.StoreAdvance.backup_store(\"silent\");\n    } else {\n      Bot.replyText(\n        `${command_prefix}upd <batch> <number> <name> <campus> <room>`\n      );\n    }\n  };\n\n  const remove = async args => {\n    if (args.length === 2) {\n      const data = {\n        batch: args[0],\n        num: args[1]\n      };\n      await FEPStoreCRUD.delete_store(data);\n      Bot.Features.StoreAdvance.backup_store(\"silent\");\n      Bot.replyText(\"Done!\");\n    } else {\n      Bot.replyText(`${command_prefix}del <batch> <number>`);\n    }\n  };\n\n  const view = async args => {\n    if (args.length === 1) {\n      const data = {\n        batch: args[0] ? args[0] : undefined\n      };\n\n      const store = await Store.getStore(\"fep\");\n\n      if (store) {\n        const selected_batch =\n          args.length !== 1 ? Object.keys(store).sort() : [data.batch];\n\n        if (selected_batch.every(item => Object.keys(store).includes(item))) {\n          let msg = `FEP BINUSIAN IT\\n(Nama - Kampus - Nomor Ruangan)\\n\\n`;\n\n          selected_batch.forEach(batch => {\n            console.log(batch);\n            msg += `${batch.toUpperCase()}. ${batch_list[batch]}\\n`;\n\n            for (let i = 0; i < store[batch].length; i += 1) {\n              msg += `  ${i + 1}. ${store[batch][i][0]} - ${\n                store[batch][i][1]\n              } - ${store[batch][i][2]}\\n`;\n            }\n            msg += `\\n`;\n\n            console.log(msg.length);\n          });\n          Bot.replyText(msg);\n        }\n      }\n    } else {\n      Bot.replyText(`${command_prefix}view <batch>`);\n    }\n  };\n\n  return {\n    add,\n    update,\n    remove,\n    view\n  };\n};\n"]}