{"version":3,"sources":["../../../src/Bot/Features/FEPList.js"],"names":["FEPList","Bot","add","args","length","data","batch","name","campus","room","FEPStoreCRUD","set_store","then","Features","StoreAdvance","backup_store","replyText","catch","err","command_prefix","update","num","update_store","remove","delete_store","view","undefined","store","Store","getStore","selected_batch","Object","keys","sort","every","item","includes","msg","forEach","console","log","toUpperCase","batch_list","i"],"mappings":"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","file":"FEPList.js","sourcesContent":["import { command_prefix, batch_list } from \"../../Bot\";\nimport FEPStoreCRUD from \"../../Bot/Helper/FEPStoreCRUD\";\n\nimport Store from \"../../Services/Store\";\n\nexport const FEPList = Bot => {\n  const add = async args => {\n    if (args.length === 4) {\n      const data = {\n        batch: args[0],\n        name: args[1],\n        campus: args[2],\n        room: args[3]\n      };\n      FEPStoreCRUD.set_store(data).then(() => {\n        Bot.Features.StoreAdvance.backup_store(\"silent\");\n        Bot.replyText(`Done!\\n${data.name} - ${data.campus} - ${data.room}`);\n      }).catch(err => {\n        Bot.replyText(`${err}`);\n      });\n\n      \n    } else {\n      Bot.replyText(`${command_prefix}add <batch> <name> <campus> <room>`);\n    }\n  };\n\n  const update = async args => {\n    if (args.length === 5) {\n      const data = {\n        batch: args[0],\n        num: args[1],\n        name: args[2],\n        campus: args[3],\n        room: args[4]\n      };\n      await FEPStoreCRUD.update_store(data);\n      Bot.replyText(\"Done!\");\n      Bot.Features.StoreAdvance.backup_store(\"silent\");\n    } else {\n      Bot.replyText(\n        `${command_prefix}upd <batch> <number> <name> <campus> <room>`\n      );\n    }\n  };\n\n  const remove = async args => {\n    if (args.length === 2) {\n      const data = {\n        batch: args[0],\n        num: args[1]\n      };\n      await FEPStoreCRUD.delete_store(data);\n      Bot.Features.StoreAdvance.backup_store(\"silent\");\n      Bot.replyText(\"Done!\");\n    } else {\n      Bot.replyText(`${command_prefix}del <batch> <number>`);\n    }\n  };\n\n  const view = async args => {\n    if (args.length === 1) {\n      const data = {\n        batch: args[0] ? args[0] : undefined\n      };\n\n      const store = await Store.getStore(\"fep\");\n\n      if (store) {\n        const selected_batch =\n          args.length !== 1 ? Object.keys(store).sort() : [data.batch];\n\n        if (selected_batch.every(item => Object.keys(store).includes(item))) {\n          let msg = `FEP BINUSIAN IT\\n(Nama - Kampus - Nomor Ruangan)\\n\\n`;\n\n          selected_batch.forEach(batch => {\n            console.log(batch);\n            msg += `${batch.toUpperCase()}. ${batch_list[batch]}\\n`;\n\n            for (let i = 0; i < store[batch].length; i += 1) {\n              msg += `  ${i + 1}. ${store[batch][i][0]} - ${\n                store[batch][i][1]\n              } - ${store[batch][i][2]}\\n`;\n            }\n            msg += `\\n`;\n\n            console.log(msg.length);\n          });\n          Bot.replyText(msg);\n        }\n      }\n    } else {\n      Bot.replyText(`${command_prefix}view <batch>`);\n    }\n  };\n\n  return {\n    add,\n    update,\n    remove,\n    view\n  };\n};\n"]}